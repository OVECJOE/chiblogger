"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[74],{2074:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(1413),s=t(885),a=t(2791),o=t(3504),u=t(6871),i=t(6355),c=t(6856),l=t(4569),d=t.n(l),p=t(2820),h=t(5928),m=t(4335),g=t(4457),f=t(184),x=function(e){var n=e.signup,t=e.setState,s=(0,a.useContext)(p.V),o=s.authData,u=s.authDispatcher,i=(0,a.useContext)(h.S).userDispatcher,l=(0,a.useContext)(m.x).projectDispatcher,x=function(){return t((function(e){return(0,r.Z)((0,r.Z)({},e),{},{ready:!1})}))},v=function(e){(0,g.bv)(e,u)};return(0,f.jsxs)("div",{className:"auth-form-container",children:[(0,f.jsx)("div",{className:"cancel-btn",onClick:x,children:(0,f.jsx)(c.WZQ,{})}),(0,f.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault();var t=n?"register":"login";d().post("/api/users/".concat(t),o,{headers:{"Content-type":"application/json"}}).then((function(e){localStorage.removeItem("authData"),i({type:"STORE_USER",user:e.data}),x(),l({type:"SET_MESSAGE",message:"Successfully logged in. Your ID: ".concat(e.data._id)})})).catch((function(e){(0,g.GW)(e,l)}))},children:[(0,f.jsxs)("h1",{children:[n?"Signup":"Login"," Form"]}),(0,f.jsxs)("div",{className:"form-item",children:[(0,f.jsx)("label",{htmlFor:"username",children:"Enter Your Username:"}),(0,f.jsx)("input",{type:"text",name:"username",placeholder:"Your Username",id:"username",required:!0,value:o.username,onChange:v})]}),n&&(0,f.jsxs)("div",{className:"form-item",children:[(0,f.jsx)("label",{htmlFor:"email",children:"Enter Your Email Address:"}),(0,f.jsx)("input",{type:"email",name:"email",placeholder:"Your Email Address",id:"email",required:!0,value:o.email,onChange:v})]}),(0,f.jsxs)("div",{className:"form-item",children:[(0,f.jsxs)("label",{htmlFor:"password",children:[n?"Create New Password":"Enter Your Password",":"]}),(0,f.jsx)("input",{type:"password",name:"password",placeholder:"".concat(n?"New":"Your"," Password"),required:!0,id:"password",value:o.password,onChange:v})]}),(0,f.jsx)("button",{children:"Submit"}),(0,f.jsxs)("p",{className:"alternative",children:[n?"Already":"Not yet"," a subscriber?"," ",(0,f.jsx)("span",{onClick:function(){t((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signup:!e.signup})}))},children:n?"Login":"Signup"})]})]})]})},v=t(2810),j=function(){var e=(0,a.useContext)(m.x),n=e.projectData,t=e.projectDispatcher;return(0,a.useEffect)((function(){n.errors.length&&setTimeout((function(){t({type:"REMOVE_ERROR"})}),8e3)}),[n.error]),(0,f.jsxs)("ul",{className:"error-list",children:[(0,f.jsx)("div",{className:"cancel-btn",onClick:function(){t({type:"REMOVE_ERROR"})},children:(0,f.jsx)(c.B4e,{})}),n.errors.map((function(e){return(0,f.jsx)("li",{children:e},(0,v.Z)())}))]})},y=function(){var e,n=(0,a.useContext)(h.S),t=n.userData,c=n.userDispatcher,l=(0,a.useContext)(m.x).projectData,d=(0,a.useState)({ready:!1,signup:!0,logoutMessage:""}),p=(0,s.Z)(d,2),g=p[0],v=p[1],y=(0,u.s0)(),b=function(e){v({ready:!g.ready,signup:e})};return(0,a.useEffect)((function(){var e=document.querySelector("#hamburger"),n=document.querySelector("#mobile-menu"),t=function t(r){r.target!=e&&r.target!=n&&(e.checked=!1,document.removeEventListener("click",t))};e.addEventListener("click",(function(){this.checked&&document.addEventListener("click",t)}))}),[]),(0,f.jsxs)("header",{className:"App__header",children:[g.logoutMessage&&(0,f.jsxs)("div",{className:"logout-msg",children:[g.logoutMessage,setTimeout((function(){return v((function(e){return(0,r.Z)((0,r.Z)({},e),{},{logoutMessage:""})}))}),3e3)&&""]}),0!==(null===(e=l.errors)||void 0===e?void 0:e.length)&&(0,f.jsx)(j,{}),(0,f.jsx)("h3",{className:"App__header-logo",children:"CHI-Blogger"}),(0,f.jsxs)("nav",{children:[(0,f.jsx)("input",{type:"checkbox",id:"hamburger"}),(0,f.jsxs)("label",{htmlFor:"hamburger",className:"hamburger",id:"mobile-menu",children:[(0,f.jsx)("span",{className:"menu",children:"Menu"}),(0,f.jsx)(i.v7m,{})]}),(0,f.jsxs)("ul",{className:"App__header-navbar",children:[(0,f.jsx)("li",{children:(0,f.jsx)(o.OL,{to:"/",children:"Home"})}),(0,f.jsx)("li",{children:(0,f.jsx)(o.OL,{to:"/learn",children:"Learn"})}),(0,f.jsx)("li",{children:(0,f.jsx)(o.OL,{to:"/about",children:"About"})}),0===Object.keys(t).length?(0,f.jsxs)("li",{className:"auth-btns",children:[(0,f.jsx)("button",{className:"login-btn",onClick:function(){return b(!1)},children:"Login"}),(0,f.jsx)("button",{className:"signup-btn",onClick:function(){return b(!0)},children:"Sign up"})]}):(0,f.jsxs)(f.Fragment,{children:[t.isAdmin&&(0,f.jsx)("li",{children:(0,f.jsx)(o.OL,{to:"/dashboard",children:"My Dashboard"})}),(0,f.jsx)("li",{className:"user-btns",children:(0,f.jsx)("button",{className:"logout-btn",onClick:function(){c({type:"REMOVE_USER"}),v((function(e){return(0,r.Z)((0,r.Z)({},e),{},{logoutMessage:"Logout Successful!"})})),y("/",{replace:!0})},children:"Logout"})})]})]})]}),g.ready&&(0,f.jsx)(x,(0,r.Z)((0,r.Z)({},g),{},{setState:v}))]})}},4457:function(e,n,t){t.d(n,{GW:function(){return i},Ix:function(){return c},bv:function(){return u},uo:function(){return l}});var r=t(4165),s=t(5861),a=t(4569),o=t.n(a),u=function(e,n){var t=e.target;n({type:"UPDATE_PROPERTY",key:t.name,value:t.value})},i=function(e,n){var t=[];e&&e.response&&(e.response.data&&e.response.data instanceof Array?t=e.response.data:e.response.statusText&&t.push(e.response.statusText)),e.message&&0===t.length&&t.push(e.message),n({type:"SET_ERROR",errors:t})},c=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,t,s){var a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/ovecjoe/image/upload",(a=new FormData).append("file",n),a.append("upload_preset","chiblogger"),a.append("cloud_name","ovecjoe"),e.prev=5,e.next=8,o().post("https://api.cloudinary.com/v1_1/ovecjoe/image/upload",a);case 8:return u=e.sent,t({type:"UPDATE_PHOTO",photoUrl:u.data.url}),e.abrupt("return",u.data.url);case 13:e.prev=13,e.t0=e.catch(5),i(e.t0,s);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(n,t,r){return e.apply(this,arguments)}}(),l=function(e){var n=new Date(e),t=new Date,r=t.getFullYear()-n.getFullYear();return r?"".concat(r," years ago"):(r=t.getMonth()-n.getMonth())?"".concat(r," months ago"):(r=t.getDay()-n.getDay())?"".concat(r," days ago"):(r=t.getHours()-n.getHours())?"".concat(r," hours ago"):(r=t.getMinutes()-n.getMinutes())?"".concat(r," minutes ago"):(r=t.getSeconds()-n.getSeconds(),"".concat(r," seconds ago"))}},2810:function(e,n,t){var r;t.d(n,{Z:function(){return d}});var s=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"===typeof e&&o.test(e)},i=[],c=0;c<256;++c)i.push((c+256).toString(16).substr(1));var l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(i[e[n+0]]+i[e[n+1]]+i[e[n+2]]+i[e[n+3]]+"-"+i[e[n+4]]+i[e[n+5]]+"-"+i[e[n+6]]+i[e[n+7]]+"-"+i[e[n+8]]+i[e[n+9]]+"-"+i[e[n+10]]+i[e[n+11]]+i[e[n+12]]+i[e[n+13]]+i[e[n+14]]+i[e[n+15]]).toLowerCase();if(!u(t))throw TypeError("Stringified UUID is invalid");return t};var d=function(e,n,t){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var s=0;s<16;++s)n[t+s]=r[s];return n}return l(r)}}}]);
//# sourceMappingURL=74.d9c090a1.chunk.js.map